(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{118:function(t,e,r){"use strict";r.r(e);var n=r(0),c=r.n(n),a=r(40),i=r.n(a),s=r(14),o=r(141),u=r(130),j=r(131),h=r(2);var l=function(){return Object(h.jsx)(u.a,{as:"header",h:"100%",bg:"gray.200",borderRadius:"5px",children:Object(h.jsx)(j.a,{children:"Header"})})},d=r(143),b=r(135),f=r(134),p=r(132),x=r(133),O=r(15),v=r(32),g=r.n(v),m=r(49),S=r(80),y=r(81),C=r(11),D=r(82),k=r.n(D),w="https://city-mobil.ru/api/cars";function L(){return R.apply(this,arguments)}function R(){return(R=Object(m.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get(w);case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var E=function(){function t(){Object(S.a)(this,t),this.tariffsList=[],this.cars=[],this.search="",this.isLoading=!0,this.pickedCar="",this.sortingDirection=null,this.n=1,this.countPerRender=30,Object(C.d)(this)}return Object(y.a)(t,[{key:"setCarsData",value:function(){var t=Object(m.a)(g.a.mark((function t(){var e,r,n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:e=t.sent,r=null===e||void 0===e?void 0:e.data,n=r.cars,c=r.tariffs_list,this.cars=n,this.tariffsList=c,this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateSearch",value:function(t){this.search=t}},{key:"resetSearch",value:function(){this.search=""}},{key:"updatePickedCar",value:function(t){this.pickedCar=t}},{key:"updateSortingDirection",value:function(t){this.sortingDirection=t,this.n=1}},{key:"updateN",value:function(){this.countPerRender*this.n<this.cars.length&&this.n++}},{key:"getCarsData",get:function(){var t=this;return this.cars.map((function(e){return["".concat(e.mark," ").concat(e.model)].concat(Object(O.a)(t.tariffsList.map((function(t){var r;return(null===(r=e.tariffs[t])||void 0===r?void 0:r.year.toString())||"-"}))))}))}},{key:"getSearchedCarsData",get:function(){var t=this;return this.search?this.getCarsData.filter((function(e){return new RegExp("".concat(t.search),"i").test("".concat(e.join(" ")))})):this.getCarsData}},{key:"getSearchedAndSortedCarsData",get:function(){return"up"===this.sortingDirection?this.getSearchedCarsData.sort((function(t,e){return t[0].toLowerCase()<e[0].toLowerCase()?1:-1})).slice(0,this.n*this.countPerRender):"down"===this.sortingDirection?this.getSearchedCarsData.sort((function(t,e){return t[0].toLowerCase()<e[0].toLowerCase()?-1:1})).slice(0,this.n*this.countPerRender):this.getSearchedCarsData.slice(0,this.n*this.countPerRender)}}]),t}(),P=Object(n.createContext)(new E);var H=function(){return Object(n.useContext)(P)};var z=Object(s.a)((function(){var t=H(),e={up:Object(h.jsx)(p.a,{}),down:Object(h.jsx)(x.a,{})};return Object(h.jsxs)(f.d,{onClick:function(){var e=t.sortingDirection;null===e?t.updateSortingDirection("down"):t.updateSortingDirection("up"===e?"down":"up")},cursor:"pointer",children:["\u041c\u0430\u0440\u043a\u0430 \u0438 \u043c\u043e\u0434\u0435\u043b\u044c ",t.sortingDirection?e[t.sortingDirection]:null]})}));var A=Object(s.a)((function(){var t=H().tariffsList;return Object(h.jsx)(f.e,{children:Object(h.jsxs)(f.f,{children:[Object(h.jsx)(z,{}),t.map((function(t){return Object(h.jsx)(f.d,{children:t},t)}))]})})})),B=r(61);var I=Object(s.a)((function(){var t=H();return Object(h.jsx)(f.b,{children:t.getSearchedAndSortedCarsData.map((function(e){return Object(h.jsx)(f.f,{children:e.map((function(r,n){return Object(h.jsx)(f.c,{onClick:function(){return function(e,r,n){var c="\u0412\u044b\u0431\u0440\u0430\u043d \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c ".concat(r," "),a="-"===n?"":"".concat(n," \u0433\u043e\u0434\u0430"),i=e>0?c+a:c;t.updatePickedCar(i)}(n,e[0],r)},children:r},Object(B.a)())}))},Object(B.a)())}))})}));var J=Object(s.a)((function(){var t=H();function e(e){var r=e.target;r&&(r.scrollHeight-(r.scrollTop+r.clientHeight)<100&&t.updateN())}return Object(n.useEffect)((function(){var t=document.getElementById("scroll");return t&&t.addEventListener("scroll",e),function(){return null===t||void 0===t?void 0:t.removeEventListener("scroll",e)}})),Object(h.jsx)(b.a,{flex:"0 1 760px",overflowY:"scroll",id:"scroll",children:Object(h.jsxs)(f.a,{variant:"simple",children:[Object(h.jsx)(A,{}),Object(h.jsx)(I,{})]})})})),N=r(5),T=r(148),F=r(136),M=r(137),Y=r(144),_=r(145),q=r(138);var G=Object(s.a)((function(){var t=Object(n.useState)(""),e=Object(N.a)(t,2),r=e[0],c=e[1],a=H();return Object(h.jsxs)(T.a,{as:"form",onSubmit:function(t){t.preventDefault(),a.updateSearch(r)},onReset:function(){c(""),a.resetSearch()},pb:"10px",children:[Object(h.jsxs)(F.a,{children:[Object(h.jsx)(M.a,{pointerEvents:"none",children:Object(h.jsx)(q.a,{color:"gray.300"})}),Object(h.jsx)(Y.a,{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:r,onChange:function(t){return c(t.target.value)}})]}),Object(h.jsx)(_.a,{type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"}),Object(h.jsx)(_.a,{type:"reset",children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})}));var K=Object(s.a)((function(){var t=H().pickedCar;return Object(h.jsx)(j.a,{p:"0 0 0 30px",fontSize:"2xl",children:t})}));var Q=Object(s.a)((function(){var t=H().isLoading;return Object(h.jsxs)(d.a,{as:"main",isLoaded:!t,d:"flex",flexDir:"column",h:"100%",children:[Object(h.jsx)(G,{}),Object(h.jsx)(J,{}),Object(h.jsx)(K,{})]})}));var U=function(){return Object(h.jsx)(u.a,{as:"aside",h:"100%",bg:"gray.200",borderRadius:"5px",children:Object(h.jsx)(j.a,{children:"Sidebar"})})};var V=function(){return Object(h.jsx)(u.a,{as:"footer",h:"100%",bg:"gray.200",borderRadius:"5px",children:Object(h.jsx)(j.a,{children:"Footer"})})};var W=Object(s.a)((function(){var t=H(),e=t.setCarsData.bind(t);return Object(n.useEffect)((function(){e()}),[e]),Object(h.jsxs)(o.a,{h:"100vh",templateRows:"1fr minmax(0, 800px) 1fr",templateColumns:"repeat(10, 1fr)",gap:4,px:"4px",children:[Object(h.jsx)(o.b,{rowSpan:1,colSpan:10,children:Object(h.jsx)(l,{})}),Object(h.jsx)(o.b,{colSpan:2,children:Object(h.jsx)(U,{})}),Object(h.jsx)(o.b,{colSpan:8,children:Object(h.jsx)(Q,{})}),Object(h.jsx)(o.b,{rowSpan:1,colSpan:10,children:Object(h.jsx)(V,{})})]})})),X=r(146),Z=r(142),$=Object(Z.a)({styles:{global:{th:{pos:"sticky",top:"0",bg:"gray.100"}}},components:{Text:{baseStyle:{fontSize:"xl"}}}});i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(X.a,{theme:$,children:Object(h.jsx)(P.Provider,{value:new E,children:Object(h.jsx)(W,{})})})}),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.b9ec8de1.chunk.js.map